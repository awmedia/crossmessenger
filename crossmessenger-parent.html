<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
        <title>CrossMessenger parent</title>
        <script src="/build/crossmessenger.bundle.js"></script>
    </head>

    <body>
        <h1>Parent document</h1>

        <iframe src="http://localhost:8082/crossmessenger-iframe.html" id="iframe"></iframe>

        <script>
                const iframeMessenger = new CrossMessenger({
                    targetFrame: document.querySelector('#iframe'),
                    targetDomain: 'http://localhost:8082',
                    messageScope: '_UNIQUE_SCOPE_'
                });


                iframeMessenger.send({
                    action: 'redux-action-creator',
                    name: 'test-from-parent-to-child',
                    payload: 'some-payload'
                }, true).then(function() {
                    console.log('Received reply from child: ', arguments);
                });

        </script>
    </body>
</html>
